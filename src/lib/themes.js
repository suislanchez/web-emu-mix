// Theme definitions
export const themes = {
  cyber: {
    id: 'cyber',
    name: 'Cyber',
    icon: 'ðŸ’ ',
    colors: {
      '--bg-primary': '#000000',
      '--bg-secondary': '#080808',
      '--bg-card': '#0d0d0d',
      '--bg-card-hover': '#151515',
      '--accent-primary': '#00d4ff',
      '--accent-secondary': '#0a1a2e',
      '--accent-glow': 'rgba(0, 212, 255, 0.15)',
      '--text-primary': '#ffffff',
      '--text-secondary': '#888899',
      '--text-muted': '#555566',
      '--border-color': '#1a1a1a',
      '--border-hover': '#2a2a2a',
      '--success': '#00ff88',
      '--warning': '#ffcc00',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.5)',
      '--shadow-md': '0 4px 20px rgba(0, 0, 0, 0.6)',
      '--shadow-lg': '0 8px 40px rgba(0, 0, 0, 0.7)',
      '--glow': '0 0 30px rgba(0, 212, 255, 0.2)',
    }
  },
  retroPink: {
    id: 'retroPink',
    name: 'Retro Pink',
    icon: 'ðŸŒ¸',
    colors: {
      '--bg-primary': '#0a0a0f',
      '--bg-secondary': '#12121a',
      '--bg-card': '#1a1a25',
      '--bg-card-hover': '#22222f',
      '--accent-primary': '#e94560',
      '--accent-secondary': '#0f3460',
      '--accent-glow': 'rgba(233, 69, 96, 0.15)',
      '--text-primary': '#ffffff',
      '--text-secondary': '#8b8b9a',
      '--text-muted': '#5a5a6a',
      '--border-color': '#2a2a3a',
      '--border-hover': '#3a3a4a',
      '--success': '#4ade80',
      '--warning': '#fbbf24',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.3)',
      '--shadow-md': '0 4px 16px rgba(0, 0, 0, 0.4)',
      '--shadow-lg': '0 8px 32px rgba(0, 0, 0, 0.5)',
      '--glow': '0 0 30px rgba(233, 69, 96, 0.2)',
    }
  },
  matrix: {
    id: 'matrix',
    name: 'Matrix',
    icon: 'ðŸŸ¢',
    colors: {
      '--bg-primary': '#000000',
      '--bg-secondary': '#0a0f0a',
      '--bg-card': '#0d150d',
      '--bg-card-hover': '#142014',
      '--accent-primary': '#00ff41',
      '--accent-secondary': '#0a2010',
      '--accent-glow': 'rgba(0, 255, 65, 0.15)',
      '--text-primary': '#e0ffe0',
      '--text-secondary': '#70a070',
      '--text-muted': '#406040',
      '--border-color': '#1a2a1a',
      '--border-hover': '#2a3a2a',
      '--success': '#00ff41',
      '--warning': '#aaff00',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.5)',
      '--shadow-md': '0 4px 20px rgba(0, 255, 65, 0.1)',
      '--shadow-lg': '0 8px 40px rgba(0, 255, 65, 0.15)',
      '--glow': '0 0 30px rgba(0, 255, 65, 0.3)',
    }
  },
  synthwave: {
    id: 'synthwave',
    name: 'Synthwave',
    icon: 'ðŸ”®',
    colors: {
      '--bg-primary': '#0a0812',
      '--bg-secondary': '#12101a',
      '--bg-card': '#1a1525',
      '--bg-card-hover': '#251d35',
      '--accent-primary': '#bf5af2',
      '--accent-secondary': '#1a1030',
      '--accent-glow': 'rgba(191, 90, 242, 0.15)',
      '--text-primary': '#f5f0ff',
      '--text-secondary': '#9080b0',
      '--text-muted': '#605070',
      '--border-color': '#2a2040',
      '--border-hover': '#3a3050',
      '--success': '#64dfdf',
      '--warning': '#ffe066',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.4)',
      '--shadow-md': '0 4px 16px rgba(191, 90, 242, 0.1)',
      '--shadow-lg': '0 8px 32px rgba(191, 90, 242, 0.15)',
      '--glow': '0 0 30px rgba(191, 90, 242, 0.25)',
    }
  },
  sunset: {
    id: 'sunset',
    name: 'Sunset',
    icon: 'ðŸŒ…',
    colors: {
      '--bg-primary': '#0f0a0a',
      '--bg-secondary': '#1a1210',
      '--bg-card': '#251a15',
      '--bg-card-hover': '#30221a',
      '--accent-primary': '#ff6b35',
      '--accent-secondary': '#2a1a10',
      '--accent-glow': 'rgba(255, 107, 53, 0.15)',
      '--text-primary': '#fff5f0',
      '--text-secondary': '#b08070',
      '--text-muted': '#705040',
      '--border-color': '#3a2a20',
      '--border-hover': '#4a3a30',
      '--success': '#7ddf64',
      '--warning': '#ffc857',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.4)',
      '--shadow-md': '0 4px 16px rgba(255, 107, 53, 0.1)',
      '--shadow-lg': '0 8px 32px rgba(255, 107, 53, 0.15)',
      '--glow': '0 0 30px rgba(255, 107, 53, 0.25)',
    }
  },
  ocean: {
    id: 'ocean',
    name: 'Ocean',
    icon: 'ðŸŒŠ',
    colors: {
      '--bg-primary': '#040810',
      '--bg-secondary': '#081018',
      '--bg-card': '#0c1520',
      '--bg-card-hover': '#101d2a',
      '--accent-primary': '#0ea5e9',
      '--accent-secondary': '#082030',
      '--accent-glow': 'rgba(14, 165, 233, 0.15)',
      '--text-primary': '#f0f8ff',
      '--text-secondary': '#6090b0',
      '--text-muted': '#406080',
      '--border-color': '#152535',
      '--border-hover': '#203545',
      '--success': '#34d399',
      '--warning': '#fcd34d',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.4)',
      '--shadow-md': '0 4px 16px rgba(14, 165, 233, 0.1)',
      '--shadow-lg': '0 8px 32px rgba(14, 165, 233, 0.15)',
      '--glow': '0 0 30px rgba(14, 165, 233, 0.25)',
    }
  },
  midnight: {
    id: 'midnight',
    name: 'Midnight',
    icon: 'ðŸŒŒ',
    colors: {
      '--bg-primary': '#0d1117',
      '--bg-secondary': '#161b22',
      '--bg-card': '#21262d',
      '--bg-card-hover': '#30363d',
      '--accent-primary': '#58a6ff',
      '--accent-secondary': '#1f6feb',
      '--accent-glow': 'rgba(88, 166, 255, 0.15)',
      '--text-primary': '#f0f6fc',
      '--text-secondary': '#8b949e',
      '--text-muted': '#6e7681',
      '--border-color': '#30363d',
      '--border-hover': '#484f58',
      '--success': '#3fb950',
      '--warning': '#d29922',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.4)',
      '--shadow-md': '0 4px 16px rgba(0, 0, 0, 0.5)',
      '--shadow-lg': '0 8px 32px rgba(0, 0, 0, 0.6)',
      '--glow': '0 0 30px rgba(88, 166, 255, 0.2)',
    }
  },
  gold: {
    id: 'gold',
    name: 'Royal Gold',
    icon: 'ðŸ‘‘',
    colors: {
      '--bg-primary': '#08080a',
      '--bg-secondary': '#101012',
      '--bg-card': '#18181c',
      '--bg-card-hover': '#202025',
      '--accent-primary': '#ffd700',
      '--accent-secondary': '#1a1810',
      '--accent-glow': 'rgba(255, 215, 0, 0.12)',
      '--text-primary': '#fffef5',
      '--text-secondary': '#a09880',
      '--text-muted': '#605850',
      '--border-color': '#2a2820',
      '--border-hover': '#3a3830',
      '--success': '#90ee90',
      '--warning': '#ffd700',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.4)',
      '--shadow-md': '0 4px 16px rgba(255, 215, 0, 0.08)',
      '--shadow-lg': '0 8px 32px rgba(255, 215, 0, 0.12)',
      '--glow': '0 0 30px rgba(255, 215, 0, 0.2)',
    }
  },
  monochrome: {
    id: 'monochrome',
    name: 'Monochrome',
    icon: 'âšª',
    colors: {
      '--bg-primary': '#000000',
      '--bg-secondary': '#0a0a0a',
      '--bg-card': '#111111',
      '--bg-card-hover': '#1a1a1a',
      '--accent-primary': '#ffffff',
      '--accent-secondary': '#1a1a1a',
      '--accent-glow': 'rgba(255, 255, 255, 0.1)',
      '--text-primary': '#ffffff',
      '--text-secondary': '#888888',
      '--text-muted': '#555555',
      '--border-color': '#222222',
      '--border-hover': '#333333',
      '--success': '#aaffaa',
      '--warning': '#ffffaa',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.5)',
      '--shadow-md': '0 4px 16px rgba(0, 0, 0, 0.6)',
      '--shadow-lg': '0 8px 32px rgba(0, 0, 0, 0.7)',
      '--glow': '0 0 20px rgba(255, 255, 255, 0.1)',
    }
  },
  gameboy: {
    id: 'gameboy',
    name: 'Game Boy',
    icon: 'ðŸŽ®',
    colors: {
      '--bg-primary': '#9bbc0f',
      '--bg-secondary': '#8bac0f',
      '--bg-card': '#306230',
      '--bg-card-hover': '#1f4a1f',
      '--accent-primary': '#0f380f',
      '--accent-secondary': '#306230',
      '--accent-glow': 'rgba(15, 56, 15, 0.2)',
      '--text-primary': '#0f380f',
      '--text-secondary': '#1f5a1f',
      '--text-muted': '#306230',
      '--border-color': '#0f380f',
      '--border-hover': '#1f4a1f',
      '--success': '#0f380f',
      '--warning': '#0f380f',
      '--shadow-sm': '0 2px 4px rgba(15, 56, 15, 0.3)',
      '--shadow-md': '0 4px 8px rgba(15, 56, 15, 0.4)',
      '--shadow-lg': '0 8px 16px rgba(15, 56, 15, 0.5)',
      '--glow': 'none',
    }
  },
  cherry: {
    id: 'cherry',
    name: 'Cherry Blossom',
    icon: 'ðŸŒ¸',
    colors: {
      '--bg-primary': '#1a0a10',
      '--bg-secondary': '#200d14',
      '--bg-card': '#2a1018',
      '--bg-card-hover': '#35151f',
      '--accent-primary': '#ff69b4',
      '--accent-secondary': '#2a1520',
      '--accent-glow': 'rgba(255, 105, 180, 0.15)',
      '--text-primary': '#fff0f5',
      '--text-secondary': '#c08090',
      '--text-muted': '#805060',
      '--border-color': '#3a1a25',
      '--border-hover': '#4a2535',
      '--success': '#90ee90',
      '--warning': '#ffb6c1',
      '--shadow-sm': '0 2px 8px rgba(0, 0, 0, 0.4)',
      '--shadow-md': '0 4px 16px rgba(255, 105, 180, 0.1)',
      '--shadow-lg': '0 8px 32px rgba(255, 105, 180, 0.15)',
      '--glow': '0 0 30px rgba(255, 105, 180, 0.2)',
    }
  },
  arctic: {
    id: 'arctic',
    name: 'Arctic',
    icon: 'â„ï¸',
    colors: {
      '--bg-primary': '#0a1015',
      '--bg-secondary': '#0f1820',
      '--bg-card': '#152028',
      '--bg-card-hover': '#1a2830',
      '--accent-primary': '#a0e8ff',
      '--accent-secondary': '#102030',
      '--accent-glow': 'rgba(160, 232, 255, 0.12)',
      '--text-primary': '#f0faff',
      '--text-secondary': '#80a0b0',
      '--text-muted': '#506070',
      '--border-color': '#1a2530',
      '--border-hover': '#253540',
      '--success': '#80ffaa',
      '--warning': '#ffe080',
      '--shadow-sm': '0 2px 8px rgba(0, 20, 40, 0.4)',
      '--shadow-md': '0 4px 16px rgba(0, 20, 40, 0.5)',
      '--shadow-lg': '0 8px 32px rgba(0, 20, 40, 0.6)',
      '--glow': '0 0 30px rgba(160, 232, 255, 0.15)',
    }
  },
}

// Settings storage key
const SETTINGS_KEY = 'retroplay_settings'

// Default settings
export const defaultSettings = {
  theme: 'cyber',
  audioEnabled: true,
  audioVolume: 80,
  showFPS: false,
  autoSave: true,
  autoSaveInterval: 60, // seconds
  virtualGamepad: 'auto', // 'auto', 'always', 'never'
  gamepadOpacity: 50,
  smoothing: true,
  scanlines: false,
  notifications: true,
  language: 'en',
}

// Load settings from localStorage
export function loadSettings() {
  try {
    const stored = localStorage.getItem(SETTINGS_KEY)
    if (stored) {
      return { ...defaultSettings, ...JSON.parse(stored) }
    }
  } catch (e) {
    console.error('Failed to load settings:', e)
  }
  return { ...defaultSettings }
}

// Save settings to localStorage
export function saveSettings(settings) {
  try {
    localStorage.setItem(SETTINGS_KEY, JSON.stringify(settings))
  } catch (e) {
    console.error('Failed to save settings:', e)
  }
}

// Apply theme to document
export function applyTheme(themeId) {
  const theme = themes[themeId] || themes.dark
  const root = document.documentElement

  Object.entries(theme.colors).forEach(([property, value]) => {
    root.style.setProperty(property, value)
  })

  // Update meta theme-color for mobile browsers
  const metaTheme = document.querySelector('meta[name="theme-color"]')
  if (metaTheme) {
    metaTheme.setAttribute('content', theme.colors['--bg-primary'])
  }

  // Store current theme
  document.body.setAttribute('data-theme', themeId)
}

// Get current theme
export function getCurrentTheme() {
  return document.body.getAttribute('data-theme') || 'dark'
}

// Initialize theme from settings
export function initTheme() {
  const settings = loadSettings()
  applyTheme(settings.theme)
}
